
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Try parallel computing yourself | AP CSP (article) | Khan Academy</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <style>
.paragraph {
  margin: 10px 0px;
}
img {
  max-width: 600px;
}
.perseus-sr-only {
  display: none;
}
li.perseus-radio-option {
  list-style-type: none;
}
  </style>
</head>
<body>
<div class="container container-md">
<h1>Try parallel computing yourself | AP CSP (article) | Khan Academy</h1>
<div class="framework-perseus perseus-article bibliotron-article"><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><div class="paragraph">Now that we've discussed parallel computing in theory, let's actually see it in action. Normally, when an engineer wants to run a parallel computing solution, they will use dedicated high-performance computers. </div></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">However, thanks to modern web technology, we can also do parallel computing in our browser.  That's right, you can watch tasks perform in parallel from the comfort of your own home or classroom. Ready?</div></div><div class="paragraph" data-perseus-paragraph-index="2"><div class="paragraph">Visit the link below to try a parallelized cat detection program:</div></div><div class="paragraph" data-perseus-paragraph-index="3"><div class="paragraph">üëâüèΩ <a class="_8gcxk83" href="https://pamelafox.github.io/parallel-demo/" rel="noopener noreferrer" tabindex="0" target="_blank">Cat detection</a></div></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><h2>Configuring the program</h2></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">The goal of a parallel computing solution is to improve efficiency. It's helpful to have parameters that we can change and observe the effects. </div></div><div class="paragraph" data-perseus-paragraph-index="2"><div class="paragraph">This program provides two parameters:</div></div><div class="paragraph" data-perseus-paragraph-index="3"><ul><li><div class="paragraph"><strong>Number of worker threads</strong>: In order to execute tasks in parallel, this program is using a browser technology called web workers. The webpage detects how many <div class="perseus-widget-container widget-nohighlight widget-inline"><span aria-describedby="uid-tooltip-1-aria-content" class="perseus-widget-definition" tabindex="0"><div class="_40jfuhb">threads</div></span></div> your computer can run concurrently based on what your hardware reports and suggests using that many workers. However, it also lets you try fewer workers so that you can see the effect on the speedup.</div></li><li><div class="paragraph"><strong>Number of images</strong>: Generally, there's a bigger benefit from parallel processing on larger data sets, so the program defaults to processing the max number of images. If you'd like, you can ask it to process fewer images and observe the difference in performance.</div></li></ul></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><h2>Monitoring the execution</h2></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">Watching a parallel program execute is like watching a relay race. How long will the program take? Which worker will complete the most work the fastest? It's very exciting.</div></div><div class="paragraph" data-perseus-paragraph-index="2"><div class="paragraph">You can watch the workers progress in the chart on the webpage. The program starts off with a short setup, a sequential portion of initializing the images array and queuing up the tasks. Then the workers are off to the races!</div></div><div class="paragraph" data-perseus-paragraph-index="3"><div class="paragraph"><div class="perseus-widget-container widget-nohighlight widget-block"><div class="perseus-image-widget"><div class="fixed-to-responsive zoomable svg-image" style="max-width: 1068px; max-height: 299px;"><img alt="Animated GIF that displays progress of 4 web workers processing multiple images." aria-hidden="true" src="https://cdn.kastatic.org/ka-perseus-images/9135684887f9d88b9de5c840b3bd3a5109685014.gif" tabindex="0"/></div><span class="perseus-sr-only"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><div class="paragraph">Animated GIF that displays progress of 4 web workers processing multiple images.</div></div></div></span></div></div></div></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><div class="paragraph">On many computers, you can also monitor your CPU activity at the same time so that you can see how your CPU is being utilized and how the work is spread across the cores of your CPU.</div></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph"> Here's what my laptop reports when the program runs with four workers:</div></div><div class="paragraph" data-perseus-paragraph-index="2"><div class="paragraph"><div class="perseus-widget-container widget-nohighlight widget-block"><div class="perseus-image-widget"><div class="fixed-to-responsive zoomable svg-image" style="max-width: 1125px; max-height: 671px;"><img alt='Two side-by-side screenshots. The first screenshot is titled "CPU History" and shows four rows of bar graphs, where the graph starts off only taking around 30% of the area and then takes 100% of the area. The second screenshot is titled "Activity Monitor" and displays a list of processes with columns for "% CPU", "CPU Time", and "Threads". The first process is "Google Chrome Helper" and shows a "% CPU" of 294.6%.  ' aria-hidden="true" src="https://cdn.kastatic.org/ka-perseus-images/25af33e3ff005959f7ae38d8dc9eae4ad469c170.png" tabindex="0"/></div><span class="perseus-sr-only"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><div class="paragraph">Two side-by-side screenshots. The first screenshot is titled "CPU History" and shows four rows of bar graphs, where the graph starts off only taking around 30% of the area and then takes 100% of the area. The second screenshot is titled "Activity Monitor" and displays a list of processes with columns for "% CPU", "CPU Time", and "Threads". The first process is "Google Chrome Helper" and shows a "% CPU" of 294.6%.  </div></div></div></span></div></div></div></div><div class="paragraph" data-perseus-paragraph-index="3"><div class="paragraph">Once the workers start going, the CPU history shows that usage shoots up to 100% across the 4 cores. The activity monitor shows that Chrome processes are using more than 320% of the CPU (each core has its own 100%) and system processes are using the rest. </div></div><div class="paragraph" data-perseus-paragraph-index="4"><div class="paragraph">When I'm just using my laptop to write an article, the activity monitor typically reports that most of the CPU is <em>not</em> being utilized. This parallelized program is definitely putting it to work.</div></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><h2>Calculating speedup</h2></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">Exactly how much more efficient is this program when it's run in parallel? Let's find out by calculating the speedup: the ratio of the time taken to run the program sequentially to the time taken to run the parallelized program. Since we have the option to try the program with varying numbers of parallel workers (as much as our hardware allows), we can calculate the speedup per each number of workers.</div></div><div class="paragraph" data-perseus-paragraph-index="2"><div class="paragraph">First, we run the program with the maximum number of images for each number of workers and record the duration each time.</div></div><div class="paragraph" data-perseus-paragraph-index="3"><div class="paragraph">Here are four runs from my laptop:</div></div><div class="paragraph" data-perseus-paragraph-index="4"><table class='table'><thead><tr><th scope="col">Workers</th><th scope="col">Duration (seconds)</th></tr></thead><tbody><tr><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--2-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span><span id="katex-uid--2-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">1</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--3-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>53.91</mn></mrow><annotation encoding="application/x-tex">53.91</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">3</span><span class="mord">.</span><span class="mord">9</span><span class="mord">1</span></span></span></span></span><span id="katex-uid--3-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">53, point, 91</span></span><span></span></span></td></tr><tr><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--4-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span></span><span id="katex-uid--4-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">2</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--5-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>32.95</mn></mrow><annotation encoding="application/x-tex">32.95</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">2</span><span class="mord">.</span><span class="mord">9</span><span class="mord">5</span></span></span></span></span><span id="katex-uid--5-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">32, point, 95</span></span><span></span></span></td></tr><tr><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--6-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span></span><span id="katex-uid--6-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">3</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--7-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>28.81</mn></mrow><annotation encoding="application/x-tex">28.81</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">8</span><span class="mord">.</span><span class="mord">8</span><span class="mord">1</span></span></span></span></span><span id="katex-uid--7-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">28, point, 81</span></span><span></span></span></td></tr><tr><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--8-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span></span><span id="katex-uid--8-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">4</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--9-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>27.66</mn></mrow><annotation encoding="application/x-tex">27.66</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">7</span><span class="mord">.</span><span class="mord">6</span><span class="mord">6</span></span></span></span></span><span id="katex-uid--9-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">27, point, 66</span></span><span></span></span></td></tr></tbody></table></div><div class="paragraph" data-perseus-paragraph-index="5"><div class="paragraph">Running the program sequentially is basically the same as running the program with a single worker, so we can calculate the speedup by dividing the first duration by each of the other durations.</div></div><div class="paragraph" data-perseus-paragraph-index="6"><table class='table'><thead><tr><th scope="col">Workers</th><th scope="col">Duration (seconds)</th><th scope="col">Speedup</th></tr></thead><tbody><tr><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--10-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span><span id="katex-uid--10-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">1</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--11-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>53.91</mn></mrow><annotation encoding="application/x-tex">53.91</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">3</span><span class="mord">.</span><span class="mord">9</span><span class="mord">1</span></span></span></span></span><span id="katex-uid--11-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">53, point, 91</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--12-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span><span id="katex-uid--12-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">1</span></span><span></span></span></td></tr><tr><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--13-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span></span><span id="katex-uid--13-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">2</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--14-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>32.95</mn></mrow><annotation encoding="application/x-tex">32.95</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">2</span><span class="mord">.</span><span class="mord">9</span><span class="mord">5</span></span></span></span></span><span id="katex-uid--14-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">32, point, 95</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--15-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>53.91</mn><mi mathvariant="normal">/</mi><mn>32.95</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1.64</mn></mrow><annotation encoding="application/x-tex">(53.91/32.95) = 1.64</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">3</span><span class="mord">.</span><span class="mord">9</span><span class="mord">1</span><span class="mord">/</span><span class="mord">3</span><span class="mord">2</span><span class="mord">.</span><span class="mord">9</span><span class="mord">5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">6</span><span class="mord">4</span></span></span></span></span><span id="katex-uid--15-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">left parenthesis, 53, point, 91, slash, 32, point, 95, right parenthesis, equals, 1, point, 64</span></span><span></span></span></td></tr><tr><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--16-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span></span><span id="katex-uid--16-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">3</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--17-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>28.81</mn></mrow><annotation encoding="application/x-tex">28.81</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">8</span><span class="mord">.</span><span class="mord">8</span><span class="mord">1</span></span></span></span></span><span id="katex-uid--17-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">28, point, 81</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--18-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>53.91</mn><mi mathvariant="normal">/</mi><mn>28.81</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1.87</mn></mrow><annotation encoding="application/x-tex">(53.91/28.81) = 1.87</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">3</span><span class="mord">.</span><span class="mord">9</span><span class="mord">1</span><span class="mord">/</span><span class="mord">2</span><span class="mord">8</span><span class="mord">.</span><span class="mord">8</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">8</span><span class="mord">7</span></span></span></span></span><span id="katex-uid--18-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">left parenthesis, 53, point, 91, slash, 28, point, 81, right parenthesis, equals, 1, point, 87</span></span><span></span></span></td></tr><tr><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--19-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span></span><span id="katex-uid--19-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">4</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--20-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>27.66</mn></mrow><annotation encoding="application/x-tex">27.66</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">7</span><span class="mord">.</span><span class="mord">6</span><span class="mord">6</span></span></span></span></span><span id="katex-uid--20-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">27, point, 66</span></span><span></span></span></td><td><span style="white-space: nowrap;"><span></span><span><span></span><span aria-describedby="katex-uid--21-described-by-id" aria-hidden="true" style="white-space: nowrap;"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>53.91</mn><mi mathvariant="normal">/</mi><mn>27.66</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1.95</mn></mrow><annotation encoding="application/x-tex">(53.91/27.66) = 1.95</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">3</span><span class="mord">.</span><span class="mord">9</span><span class="mord">1</span><span class="mord">/</span><span class="mord">2</span><span class="mord">7</span><span class="mord">.</span><span class="mord">6</span><span class="mord">6</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">9</span><span class="mord">5</span></span></span></span></span><span id="katex-uid--21-described-by-id" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px;">left parenthesis, 53, point, 91, slash, 27, point, 66, right parenthesis, equals, 1, point, 95</span></span><span></span></span></td></tr></tbody></table></div><div class="paragraph" data-perseus-paragraph-index="7"><div class="paragraph">We can also graph the speedup to visualize how it changes as the number of workers increases:</div></div><div class="paragraph" data-perseus-paragraph-index="8"><div class="paragraph"><div class="perseus-widget-container widget-nohighlight widget-block"><div class="perseus-image-widget"><div class="fixed-to-responsive svg-image" style="max-width: 480px; max-height: 230px;"><img alt=" A graph with number of workers on the x-axis and speedup on the y-axis. Four points are plotted: [1, 1], [2, 1.64], [3, 1.87], [4, 1.95]." aria-hidden="true" src="https://cdn.kastatic.org/ka-perseus-graphie/0488ea01d20fe1f1dcb519147212c61f92a712a5.svg" tabindex="0"/><div class="graphie-container"><div class="graphie" style="position: relative; width: 100%; height: 100%;"><svg height="100%" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" version="1.1" width="100%" xmlns="http://www.w3.org/2000/svg"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Rapha√´l</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs></svg><span class="graphie-label" data-math-formula="\small{1}" data-math-type="katex" style="position: absolute; padding: 7px; color: black; left: 22.7273%; top: 85.5074%; fill: none; font-size: 100%; margin-left: -10px; margin-top: 0px;"><span class="katex-holder"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>1</mn></mstyle></mrow><annotation encoding="application/x-tex">\small{1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.579996em; vertical-align: 0em;"></span><span class="mord sizing reset-size6 size5"><span class="mord">1</span></span></span></span></span></span><span class="mathjax-holder"></span></span><span class="graphie-label" data-math-formula="\small{2}" data-math-type="katex" style="position: absolute; padding: 7px; color: black; left: 37.8787%; top: 85.5074%; fill: none; font-size: 100%; margin-left: -10px; margin-top: 0px;"><span class="katex-holder"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>2</mn></mstyle></mrow><annotation encoding="application/x-tex">\small{2}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.579996em; vertical-align: 0em;"></span><span class="mord sizing reset-size6 size5"><span class="mord">2</span></span></span></span></span></span><span class="mathjax-holder"></span></span><span class="graphie-label" data-math-formula="\small{3}" data-math-type="katex" style="position: absolute; padding: 7px; color: black; left: 53.0302%; top: 85.5074%; fill: none; font-size: 100%; margin-left: -10px; margin-top: 0px;"><span class="katex-holder"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>3</mn></mstyle></mrow><annotation encoding="application/x-tex">\small{3}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.579996em; vertical-align: 0em;"></span><span class="mord sizing reset-size6 size5"><span class="mord">3</span></span></span></span></span></span><span class="mathjax-holder"></span></span><span class="graphie-label" data-math-formula="\small{4}" data-math-type="katex" style="position: absolute; padding: 7px; color: black; left: 68.1819%; top: 85.5074%; fill: none; font-size: 100%; margin-left: -10px; margin-top: 0px;"><span class="katex-holder"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>4</mn></mstyle></mrow><annotation encoding="application/x-tex">\small{4}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.579996em; vertical-align: 0em;"></span><span class="mord sizing reset-size6 size5"><span class="mord">4</span></span></span></span></span></span><span class="mathjax-holder"></span></span><span class="graphie-label" data-math-formula="\small{1}" data-math-type="katex" style="position: absolute; padding: 7px; color: black; left: 7.57575%; top: 56.5217%; fill: none; font-size: 100%; margin-left: -20px; margin-top: -17px;"><span class="katex-holder"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>1</mn></mstyle></mrow><annotation encoding="application/x-tex">\small{1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.579996em; vertical-align: 0em;"></span><span class="mord sizing reset-size6 size5"><span class="mord">1</span></span></span></span></span></span><span class="mathjax-holder"></span></span><span class="graphie-label" data-math-formula="\small{2}" data-math-type="katex" style="position: absolute; padding: 7px; color: black; left: 7.57575%; top: 27.5362%; fill: none; font-size: 100%; margin-left: -20px; margin-top: -17px;"><span class="katex-holder"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>2</mn></mstyle></mrow><annotation encoding="application/x-tex">\small{2}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.579996em; vertical-align: 0em;"></span><span class="mord sizing reset-size6 size5"><span class="mord">2</span></span></span></span></span></span><span class="mathjax-holder"></span></span><span class="graphie-label" data-math-formula="Speedup" data-math-type="katex" style="position: absolute; padding: 7px; color: black; left: 7.57575%; top: 13.0435%; fill: none; font-size: 100%; margin-left: -31px; margin-top: -34px;"><span class="katex-holder"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>u</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">Speedup</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault">p</span><span class="mord mathdefault">e</span><span class="mord mathdefault">e</span><span class="mord mathdefault">d</span><span class="mord mathdefault">u</span><span class="mord mathdefault">p</span></span></span></span></span><span class="mathjax-holder"></span></span><span class="graphie-label" data-math-formula="Workers" data-math-type="katex" style="position: absolute; padding: 7px; color: black; left: 83.3333%; top: 85.5074%; fill: none; font-size: 100%; margin-left: 0px; margin-top: -17px;"><span class="katex-holder"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">Workers</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">W</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">s</span></span></span></span></span><span class="mathjax-holder"></span></span></div></div></div><span class="perseus-sr-only"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><div class="paragraph"> A graph with number of workers on the x-axis and speedup on the y-axis. Four points are plotted: [1, 1], [2, 1.64], [3, 1.87], [4, 1.95].</div></div></div></span></div></div></div></div><div class="paragraph" data-perseus-paragraph-index="9"><div class="paragraph">üîç Try this from the computer you're using now. How do the results compare? If there are big differences, what do you think is responsible for those differences?  <div class="perseus-widget-container widget-nohighlight widget-inline"><div class="_167wsvl"><div class="_pupwzyp"><a aria-expanded="false" class="_13sgcdp7 _7n4oib" href="javascript:void(0)" role="button" tabindex="0">[Discuss]</a></div></div></div></div></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><h2>Factors that affect performance</h2></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">My computer got close to a 2x speedup but nowhere near a 4x speedup, which is what we might have expected with 4 workers. Why not?</div></div><div class="paragraph" data-perseus-paragraph-index="2"><div class="paragraph">There are many factors that can affect the amount of time the computer takes to complete the program:</div></div><div class="paragraph" data-perseus-paragraph-index="3"><h3>Hyperthreading</h3></div><div class="paragraph" data-perseus-paragraph-index="4"><div class="paragraph">Even though my computer reports that it can run four threads concurrently, I discovered that my CPU only has <em>two</em> cores:</div></div><div class="paragraph" data-perseus-paragraph-index="5"><div class="paragraph"><div class="perseus-widget-container widget-nohighlight widget-block"><div class="perseus-image-widget"><div class="fixed-to-responsive svg-image" style="max-width: 494px; max-height: 241px;"><img alt='Screenshot of Apple system information screen with title of "Hardware Overview" and the following table:

Column | Value
- | - | -
Model Name: | MacBook Pro
Model Identifier: | MacBookPro14,2
Processor Name: | Intel Core i5
Processor Speed: | 3.1 GHz
Number of Processors: | 1
Total Number of Cores: | 2' aria-hidden="true" src="https://cdn.kastatic.org/ka-perseus-images/389a45496ba71a8324fd60864309ddac435699c8.png" tabindex="0"/></div><span class="perseus-sr-only"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><div class="paragraph">Screenshot of Apple system information screen with title of "Hardware Overview" and the following table:</div></div><div class="paragraph" data-perseus-paragraph-index="1"><table class='table'><thead><tr><th scope="col">Column</th><th scope="col">Value</th></tr></thead><tbody><tr><td>Model Name:</td><td>MacBook Pro</td></tr><tr><td>Model Identifier:</td><td>MacBookPro14,2</td></tr><tr><td>Processor Name:</td><td>Intel Core i5</td></tr><tr><td>Processor Speed:</td><td>3.1 GHz</td></tr><tr><td>Number of Processors:</td><td>1</td></tr><tr><td>Total Number of Cores:</td><td>2</td></tr></tbody></table></div></div></span><div class="perseus-image-caption"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><div class="paragraph">Hardware details from my Apple laptop system overview</div></div></div></div></div></div></div></div><div class="paragraph" data-perseus-paragraph-index="6"><div class="paragraph">Those two cores use a technology called <strong>hyperthreading</strong>, however.  Intel invented hyperthreading to enable a single CPU core to run <em>two</em> threads concurrently. Since Intel is a very popular manufacturer of CPUs, many personal computers now come with hyperthreaded CPUs.</div></div><div class="paragraph" data-perseus-paragraph-index="7"><div class="paragraph">Hyperthreading works well when two threads are doing different kinds of computation. For example, one task could be doing arithmetic operations while the other task is processing input. Those two tasks are utilizing different parts of the CPU and can be sped up by hyperthreading. However, if two tasks are running identical instructions, hyperthreading can't speed them up.</div></div><div class="paragraph" data-perseus-paragraph-index="8"><div class="paragraph">The fact that my laptop has only two (hyperthreaded) physical cores is the most likely explanation for why the speedup approaches two but never gets close to four.</div></div><div class="paragraph" data-perseus-paragraph-index="9"><div class="paragraph">üîç If you see similar behavior on your machine, do a little investigation to find out how many physical cores the CPU has.</div></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><h3>Other CPU activity</h3></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">When this program runs from a web browser on a computer, it's competing for CPU time with other processes. </div></div><div class="paragraph" data-perseus-paragraph-index="2"><div class="paragraph">Before I started the program on my laptop, the CPU was already running over 400 processes, a mix of system processes and user applications:</div></div><div class="paragraph" data-perseus-paragraph-index="3"><div class="paragraph"><div class="perseus-widget-container widget-nohighlight widget-block"><div class="perseus-image-widget"><div class="fixed-to-responsive zoomable svg-image" style="max-width: 1104px; max-height: 198px;"><img alt='Screenshot from Apple Activity Monitor. The center shows an area chart titled "CPU Load".

The left side displays this table:

Column | Value
- | - | -
System: | 7.76%
User: | 15.27%
Idle: | 76.97%

The right side displays this table:

Column | Value
- | - | -
Threads: | 2968
Processes: | 484' aria-hidden="true" src="https://cdn.kastatic.org/ka-perseus-images/993d1b9ef4c410f85d94d5ff472940b9ea94b411.png" tabindex="0"/></div><span class="perseus-sr-only"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><div class="paragraph">Screenshot from Apple Activity Monitor. The center shows an area chart titled "CPU Load".</div></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">The left side displays this table:</div></div><div class="paragraph" data-perseus-paragraph-index="2"><table class='table'><thead><tr><th scope="col">Column</th><th scope="col">Value</th></tr></thead><tbody><tr><td>System:</td><td>7.76%</td></tr><tr><td>User:</td><td>15.27%</td></tr><tr><td>Idle:</td><td>76.97%</td></tr></tbody></table></div><div class="paragraph" data-perseus-paragraph-index="3"><div class="paragraph">The right side displays this table:</div></div><div class="paragraph" data-perseus-paragraph-index="4"><table class='table'><thead><tr><th scope="col">Column</th><th scope="col">Value</th></tr></thead><tbody><tr><td>Threads:</td><td>2968</td></tr><tr><td>Processes:</td><td>484</td></tr></tbody></table></div></div></span></div></div></div></div><div class="paragraph" data-perseus-paragraph-index="4"><div class="paragraph">It might be confusing to hear that a computer with 2 cores can run over 400 processes at once. Most of the time, when a computer runs multiple processes "at once", it's actually switching rapidly between them, so quickly that the user doesn't notice. When a computer runs two processes truly in parallel, then it no longer needs to switch between them.</div></div><div class="paragraph" data-perseus-paragraph-index="5"><div class="paragraph">The program can't complete as quickly when the CPU is also executing instructions from other processes, but it's hard to know exactly how much the program's duration is affected. That uncertainty affects our speedup measurements, since the run with 4 workers might have been more or less affected by other CPU activity than the run with 1 worker.</div></div><div class="paragraph" data-perseus-paragraph-index="6"><div class="paragraph">üîç For the most accurate measurements, quit as many other applications as possible and wait until your CPU monitor shows very low levels of activity. Then hit that button and see what happens when more of your computer's CPU resources are freed up to work on the program.</div></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><h3>User interface updates</h3></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">The webpage that runs this program includes many visual elements: the constantly updating chart, the images and their loading indicators, the status text. Whenever a webpage needs to update a visual element, the CPU is doing work to calculate the new pixels and render them to the screen. That additional work slows down the execution time.</div></div><div class="paragraph" data-perseus-paragraph-index="2"><div class="paragraph">As an experiment, I disabled the UI updates in the program and saw the duration go from 30 seconds to 22 seconds, a significant decrease.</div></div><div class="paragraph" data-perseus-paragraph-index="3"><div class="paragraph">üîç Try for yourself on <a class="_8gcxk83" href="https://pamelafox.github.io/parallel-demo/?disableUI=true" rel="noopener noreferrer" tabindex="0" target="_blank">this UI-less version</a> of the cat detection program. </div></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph" data-perseus-paragraph-index="0"><h2>Improving the performance</h2></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">Now that we've thoroughly explored the performance of this parallelized program, we have a better idea how to improve the performance. If we were running this program in a production environment, like for a company or research project, then we might make these changes:</div></div><div class="paragraph" data-perseus-paragraph-index="2"><ul><li>Use hardware with as many <em>physical</em> CPU cores as possible. More physical cores means more tasks that can truly run in parallel.</li><li>Run the program on a <em>dedicated</em> machine, a computer that isn't running other user processes. It will still be running a few systems processes to keep the operating systems running, but nowhere near as many as a typical home computer runs.</li><li>Run the program from the <em>command line</em>, not a webpage. Eliminating the graphical user interface removes the need for any UI updates.</li></ul></div><div class="paragraph" data-perseus-paragraph-index="3"><div class="paragraph">ü§î What other ideas do you have for improving the program?   <div class="perseus-widget-container widget-nohighlight widget-inline"><div class="_167wsvl"><div class="_pupwzyp"><a aria-expanded="false" class="_13sgcdp7 _7n4oib" href="javascript:void(0)" role="button" tabindex="0">[Discuss]</a></div></div></div></div></div></div></div><div class="clearfix"><div class="perseus-renderer perseus-renderer-responsive"><div class="paragraph perseus-paragraph-centered" data-perseus-paragraph-index="0"><hr/></div><div class="paragraph" data-perseus-paragraph-index="1"><div class="paragraph">üôãüèΩüôãüèª‚Äç‚ôÄÔ∏èüôãüèø‚Äç‚ôÇÔ∏èDo you have any questions about this topic? We'd love to answer‚Äîjust ask in the questions area below! <div class="perseus-widget-container widget-nohighlight widget-inline"><div class="_167wsvl"><div class="_pupwzyp"><a aria-expanded="false" class="_13sgcdp7 _7n4oib" href="javascript:void(0)" role="button" tabindex="0">[Where is it?]</a></div></div></div></div></div></div></div></div>
</div>
</body>
</html>
